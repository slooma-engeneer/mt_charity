<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุฌูุนูุฉ ุณูุงุนุฏ ุดุจุงุจ ููุจูุง ุงูุฎูุฑูุฉ - ูุดุฑ ุงูุฎูุฑ ูุงูุฃูู</title>
    <link rel="stylesheet" href="./styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>

<body>
    <header>
        <nav>
            <div class="logo">ุฌูุนูุฉ ุณูุงุนุฏ ุดุจุงุจ ููุจูุง ๐ </div>
            <ul>
                <li><a href="#home">ุงูุฑุฆูุณูุฉ</a></li>
                <li><a href="#activities">ุงููุดุงุฑูุน ูุงูุฃูุดุทุฉ</a></li>
                <li><a href="#partner-organizations">ุดุฑูุงุฆูุง</a></li>
                <li><a href="#about">ูู ูุญู</a></li>
            </ul>
        </nav>
    </header>

    <section id="home" class="hero">
        <div class="hero-content">
            <h2>ูุดุฑ ุงูุฃูู ูุงูุฎูุฑ ูู ุงููุฌุชูุน ๐</h2>
            <p>ูุญู ุฌูุนูุฉ ุฎูุฑูุฉ ุชูุฏู ุฅูู ูุณุงุนุฏุฉ ุงููุญุชุงุฌูู ููุดุฑ ุงููุฑุญ ูุงูุฃูู ูู ูููุจ ุงููุงุณ ูู ุฎูุงู ุฃูุดุทุชูุง ุงููุชููุนุฉ</p>
            <button class="cta-button" onclick="window.open('https://wa.me/+218925151191?text=ูุฑุญุจุงูุ ุฃุฑูุฏ ุงูุงูุถูุงู ุฅูู ุฌูุนูุฉ ุณูุงุนุฏ ุดุจุงุจ ููุจูุง ุงูุฎูุฑูุฉ', '_blank')">ุงูุถู ุฅูููุง ุงูุขู ๐ซ</button>
        </div>
    </section>

    <section id="activities" class="activities">
        <div class="container">
            <h2>ุฃูุดุทุชูุง ุงูุฎูุฑูุฉ<b> ๐ฏ</b></h2>
            <div id="activities-grid" class="activities-grid">
                <!-- Events will be loaded dynamically -->
                <div class="loading-message">
                    <p>ุฌุงุฑู ุชุญููู ุงูุฃูุดุทุฉ...</p>
                </div>
            </div>
        </div>
    </section>

    <section id="about" class="about">
        <div class="container">
            <h2>ูู ูุญู ๐ค</h2>
            
            <div class="about-content">
                <div class="about-intro">
                    <p>
                        ุฌูุนูุฉ ุณูุงุนุฏ ุดุจุงุจ ููุจูุง ุงูุฎูุฑูุฉ ูู ููุธูุฉ ุบูุฑ ุฑุจุญูุฉ ุชุฃุณุณุช ุจูุฏู ูุดุฑ ุงูุฎูุฑ ูุงูุฃูู ูู ุงููุฌุชูุน.
                        ูุนูู ุนูู ูุณุงุนุฏุฉ ุงูุฃุณุฑ ุงููุญุชุงุฌุฉ ูุงูุฃูุชุงู ููุจุงุฑ ุงูุณู ูู ุฎูุงู ุจุฑุงูุฌ ูุชููุนุฉ ุชุดูู ุงูุชุบุฐูุฉ ูุงููุณูุฉ ูุงูุชุนููู
                        ูุงูุฑุนุงูุฉ ุงูุตุญูุฉ. ๐
                    </p>
                </div>

                <div class="about-grid">
                    <div class="about-card">
                        <h3>ุฑุณุงูุชูุง ๐ฏ</h3>
                        <p>ูุณุนู ูุชุญููู ุงูุชูุงูู ุงูุงุฌุชูุงุนู ููุดุฑ ุฑูุญ ุงูุนุทุงุก ูู ุงููุฌุชูุน ูู ุฎูุงู ุชูุฏูู ุงููุณุงุนุฏุฉ ูููุญุชุงุฌูู ูุชูููุฑ ุงูุญูุงุฉ ุงููุฑููุฉ ููุฃุณุฑ ุงููุชุนููุฉ ูุงูุฃูุชุงู ููุจุงุฑ ุงูุณู.</p>
                    </div>

                    <div class="about-card">
                        <h3>ุฑุคูุชูุง ๐</h3>
                        <p>ุฃู ูููู ุงููุคุณุณุฉ ุงูุฎูุฑูุฉ ุงูุฑุงุฆุฏุฉ ูู ุงูููุทูุฉ ูู ูุฌุงู ุงูุนูู ุงูุงุฌุชูุงุนู ูุงูุฅูุณุงููุ ููุณุงูู ูู ุจูุงุก ูุฌุชูุน ูุชุถุงูู ุฎุงูู ูู ุงูููุฑ ูุงูุญุฑูุงู.</p>
                    </div>

                    <div class="about-card">
                        <h3>ุฃูุฏุงููุง ๐</h3>
                        <ul>
                            <li>ุชูุฏูู ุงููุณุงุนุฏุงุช ุงูุบุฐุงุฆูุฉ ูุงูุนูููุฉ ููุฃุณุฑ ุงููุญุชุงุฌุฉ</li>
                            <li>ุฑุนุงูุฉ ุงูุฃูุชุงู ููุจุงุฑ ุงูุณู</li>
                            <li>ุชูููุฑ ุงูุฑุนุงูุฉ ุงูุตุญูุฉ ูุงูุชุนููููุฉ</li>
                            <li>ูุดุฑ ุซูุงูุฉ ุงูุชุทูุน ูุงูุนุทุงุก ูู ุงููุฌุชูุน</li>
                            <li>ุงูุชุทููุฑ ุงููุณุชูุฑ ูุจุฑุงูุฌูุง ุงูุฎูุฑูุฉ</li>
                        </ul>
                    </div>

                    <div class="about-card contact-info">
                        <h3>ุชูุงุตู ูุนูุง ๐</h3>
                        <div class="contact-methods">
                            <div class="contact-item">
                                <i class="fas fa-phone"></i>
                                <span>ุงููุงุชู: 0925151191</span>
                            </div>
                            <!-- <div class="contact-item">
                                <i class="fas fa-envelope"></i>
                                <span>ุงูุจุฑูุฏ: </span>
                            </div> -->
                            <div class="contact-item">
                                <i class="fab fa-whatsapp"></i>
                                <span>ูุงุชุณุงุจ: 0925151191</span>
                            </div>
                            <div class="contact-item">
                                <i class="fas fa-map-marker-alt"></i>
                                <span>ุงูุนููุงู: ุณุจูุงุ ุงููุฑุถุฉ</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="partner-organizations" class="partner-organizations">
        <div class="container">
            <h2>ุดุฑูุงุคูุง ๐ค</h2>
            <p class="section-intro">ูุนูู ูุน ุดุฑูุงุก ููุซูููู ูุชูุฏูู ุฃูุถู ุงูุฎุฏูุงุช ูููุฌุชูุน</p>
            
            <div id="organizations-grid" class="organizations-grid">
                <!-- Partners will be loaded dynamically -->
                <div class="loading-message">
                    <p>ุฌุงุฑู ุชุญููู ุงูุดุฑูุงุก...</p>
                </div>
            </div>
        </div>
    </section>

    <footer>
        <div class="container">
            <p>&copy; 2025 ุฌูุนูุฉ ุณูุงุนุฏ ุดุจุงุจ ููุจูุง ุงูุฎูุฑูุฉ. ุฌููุน ุงูุญููู ูุญููุธุฉ. ุตูุน ุจู ๐ ูุฎุฏูุฉ ุงูุฅูุณุงููุฉ </p>
            <div id="developer">
                <a href="/developer.html" title="ูุนูููุงุช ุงููุทูุฑ">
                    <i class="fas fa-info-circle"></i>
                </a>
            </div>
        </div>
    </footer>

    <script>
        // Function to format date in Arabic
        function formatDate(dateString) {
            const date = new Date(dateString);
            const options = {
                year: 'numeric',
                month: 'long',
                day: 'numeric',
                calendar: 'islamic-umalqura'
            };
            return date.toLocaleDateString('ar-SA', options);
        }

        // Function to truncate text
        function truncateText(text, maxLength) {
            if (text.length <= maxLength) return text;
            return text.substring(0, maxLength) + '...';
        }

        // Function to load and display events
        async function loadEvents() {
            try {
                const response = await fetch('/api/public/events');
                const events = await response.json();
                
                const activitiesGrid = document.getElementById('activities-grid');
                
                if (events.length === 0) {
                    activitiesGrid.innerHTML = `
                        <div class="no-data-message">
                            <p>ูุง ุชูุฌุฏ ุฃูุดุทุฉ ูุชุงุญุฉ ุญุงููุงู</p>
                            <p>ุณูุชู ุฅุถุงูุฉ ุงูุฃูุดุทุฉ ูุฑูุจุงู ุฅู ุดุงุก ุงููู</p>
                        </div>
                    `;
                    return;
                }

                // Clear loading message
                activitiesGrid.innerHTML = '';

                // Display events (limit to 6 for homepage)
                const displayEvents = events.slice(0, 6);
                
                displayEvents.forEach(event => {
                    const eventCard = document.createElement('div');
                    eventCard.className = 'activity-card';
                    eventCard.style.cursor = 'pointer';
                    
                    // Get first image or use placeholder
                    const firstImage = event.images && event.images.length > 0
                        ? event.images[0].path
                        : 'https://images.unsplash.com/photo-1559027615-cd4628902d4a?w=400';
                    
                    eventCard.innerHTML = `
                        <img src="${firstImage}" alt="${event.title}" onerror="this.src='https://images.unsplash.com/photo-1559027615-cd4628902d4a?w=400'">
                        <div class="card-content">
                            <h3>${event.title}</h3>
                            <p>${truncateText(event.description, 120)}</p>
                            <div class="event-meta">
                                <span class="date">${formatDate(event.date)}</span>
                                <span class="people-helped">ุงููุณุชููุฏูู: ${event.people_helped}</span>
                            </div>
                        </div>
                    `;
                    
                    // Add click event to navigate to event detail
                    eventCard.addEventListener('click', () => {
                        window.location.href = `/event/${event.id}`;
                    });
                    
                    activitiesGrid.appendChild(eventCard);
                });

            } catch (error) {
                console.error('Error loading events:', error);
                document.getElementById('activities-grid').innerHTML = `
                    <div class="error-message">
                        <p>ุญุฏุซ ุฎุทุฃ ูู ุชุญููู ุงูุฃูุดุทุฉ</p>
                        <p>ูุฑุฌู ุงููุญุงููุฉ ูุฑุฉ ุฃุฎุฑู ูุงุญูุงู</p>
                    </div>
                `;
            }
        }

        // Function to load and display partners
        async function loadPartners() {
            try {
                const response = await fetch('/api/public/partners');
                const partners = await response.json();
                
                const organizationsGrid = document.getElementById('organizations-grid');
                
                if (partners.length === 0) {
                    organizationsGrid.innerHTML = `
                        <div class="no-data-message">
                            <p>ูุง ููุฌุฏ ุดุฑูุงุก ูุชุงุญูู ุญุงููุงู</p>
                            <p>ุณูุชู ุฅุถุงูุฉ ุงูุดุฑูุงุก ูุฑูุจุงู ุฅู ุดุงุก ุงููู</p>
                        </div>
                    `;
                    return;
                }

                // Clear loading message
                organizationsGrid.innerHTML = '';

                // Display partners (limit to 8 for homepage)
                const displayPartners = partners.slice(0, 8);
                
                displayPartners.forEach(partner => {
                    const partnerCard = document.createElement('div');
                    partnerCard.className = 'org-card';
                    
                    partnerCard.innerHTML = `
                        <h3>${partner.name}</h3>
                        <p>${truncateText(partner.description, 100)}</p>
                        <div class="org-contact">
                            ${partner.phone ? `<span>๐ ${partner.phone}</span>` : ''}
                            ${partner.website ? `<span>๐ ${partner.website}</span>` : ''}
                            ${partner.email ? `<span>๐ง ${partner.email}</span>` : ''}
                        </div>
                        ${partner.location ? `<div class="org-location"><span>๐ ${partner.location}</span></div>` : ''}
                    `;
                    
                    organizationsGrid.appendChild(partnerCard);
                });

            } catch (error) {
                console.error('Error loading partners:', error);
                document.getElementById('organizations-grid').innerHTML = `
                    <div class="error-message">
                        <p>ุญุฏุซ ุฎุทุฃ ูู ุชุญููู ุงูุดุฑูุงุก</p>
                        <p>ูุฑุฌู ุงููุญุงููุฉ ูุฑุฉ ุฃุฎุฑู ูุงุญูุงู</p>
                    </div>
                `;
            }
        }

        // Load data when page loads
        document.addEventListener('DOMContentLoaded', function() {
            loadEvents();
            loadPartners();
        });
    </script>
</body>

</html>